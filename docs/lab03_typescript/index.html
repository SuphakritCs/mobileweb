<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>Student Management System</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">

  <!-- Custom Theme -->
  <style>
    body {
      background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
      font-family: "Prompt", sans-serif;
      padding-bottom: 70px;
      animation: fadeIn 1s ease;
    }

    h2 {
      color: #1b5e20;
      font-weight: 600;
      animation: slideDown 0.8s ease-out;
      letter-spacing: 1px;
    }

    .card {
      border-radius: 18px;
      border: none;
      background: white;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      transition: 0.3s;
      animation: fadeUp 0.8s ease;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 26px rgba(0,0,0,0.18);
    }

    .btn-green {
      background: linear-gradient(135deg, #43a047, #2e7d32);
      color: white;
      border-radius: 12px;
      font-weight: 500;
      transition: 0.25s;
      box-shadow: 0 4px 10px rgba(67,160,71,0.3);
    }

    .btn-green:hover {
      transform: translateY(-3px) scale(1.03);
      box-shadow: 0 6px 16px rgba(46,125,50,0.4);
      color: white;
    }

    .btn-red {
      background: #c62828;
      color: white;
      border-radius: 10px;
      padding: 6px 12px;
      border: none;
    }

    .btn-yellow {
      background: #ffca28;
      color: black;
      border-radius: 10px;
      padding: 6px 12px;
      border: none;
    }

    .table thead {
      background: linear-gradient(135deg, #a5d6a7, #81c784);
      color: #1b5e20;
    }

    @keyframes fadeUp { from { opacity: 0; transform: translateY(14px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }

    .fire-effect {
      animation: fireGlow 1s ease-in-out 2;
      background: rgba(255,140,0,0.15) !important;
    }

    @keyframes fireGlow {
      0% { box-shadow: 0 0 6px 3px rgba(255,100,0,0.6); }
      50% { box-shadow: 0 0 14px 6px rgba(255,60,0,0.9); }
      100% { box-shadow: 0 0 6px 3px rgba(255,100,0,0.6); }
    }

    .floating-header {
      position: sticky;
      top: 0;
      background: rgba(232,245,233,0.95);
      backdrop-filter: blur(5px);
      padding: 15px 0;
      z-index: 10;
    }

    .modern-modal .modal-content {
      border-radius: 22px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.35);
      backdrop-filter: blur(18px);
      border: 1px solid rgba(255, 255, 255, 0.4);
      animation: popupShow 0.55s ease;
    }

    @keyframes popupShow {
      from { opacity: 0; transform: scale(0.75) translateY(18px); }
      to { opacity: 1; transform: scale(1) translateY(0); }
    }

    .closing {
      animation: popupClose 0.45s ease forwards !important;
    }

    @keyframes popupClose {
      from { opacity: 1; transform: scale(1); }
      to { opacity: 0; transform: scale(0.7); }
    }
  </style>
</head>

<body class="p-4">

  <!-- Header -->
  <div class="floating-header text-center mb-3">
    <h2>üìö ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ (Student Management System)</h2>
  </div>

  <!-- ADD STUDENT FORM -->
  <div class="card p-4 mb-4">
    <h5 class="text-success mb-3">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</h5>

    <div class="row g-3">
      <div class="col-md-2"><input id="id" type="text" class="form-control" placeholder="Student ID" /></div>
      <div class="col-md-2"><input id="title_name" type="text" class="form-control" placeholder="‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤" /></div>
      <div class="col-md-2"><input id="first_name" type="text" class="form-control" placeholder="‡∏ä‡∏∑‡πà‡∏≠" /></div>
      <div class="col-md-2"><input id="last_name" type="text" class="form-control" placeholder="‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" /></div>
      <div class="col-md-3"><input id="email" type="email" class="form-control" placeholder="Email" /></div>
      <div class="col-md-2"><input id="year" type="number" class="form-control" placeholder="‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏µ" /></div>
      <div class="col-md-3"><input id="major" type="text" class="form-control" placeholder="‡∏™‡∏≤‡∏Ç‡∏≤" /></div>

      <div class="col-md-2 d-grid">
        <button id="addBtn" class="btn btn-green">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
      </div>
      <div class="col-md-2 d-grid">
        <button id="clearAllBtn" class="btn btn-red">‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
      </div>
    </div>
  </div>

  <!-- Search by name -->
  <div class="card p-4 mb-4">
    <h5 class="text-success">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡∏∑‡πà‡∏≠</h5>
    <input id="searchName" class="form-control mb-2" placeholder="‡∏õ‡πâ‡∏≠‡∏ô‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤" />
    <button id="searchNameBtn" class="btn btn-green">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
  </div>

  <!-- Search by major -->
  <div class="card p-4 mb-4">
    <h5 class="text-success">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏≤‡∏Ç‡∏≤</h5>
    <input id="searchMajor" class="form-control mb-2" placeholder="‡∏õ‡πâ‡∏≠‡∏ô‡∏™‡∏≤‡∏Ç‡∏≤" />
    <button id="searchMajorBtn" class="btn btn-green">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
  </div>

  <!-- Search by Email -->
  <div class="card p-4 mb-4">
    <h5 class="text-success">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢ Email</h5>
    <input id="searchEmail" class="form-control mb-2" placeholder="‡∏Å‡∏£‡∏≠‡∏Å Email" />
    <button id="searchEmailBtn" class="btn btn-green">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
  </div>

  <!-- TABLE -->
  <div class="card p-4">
    <table class="table table-bordered table-striped align-middle">
      <thead>
        <tr>
          <th>ID</th>
          <th>‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤</th>
          <th>‡∏ä‡∏∑‡πà‡∏≠</th>
          <th>‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
          <th>Email</th>
          <th>‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏µ</th>
          <th>‡∏™‡∏≤‡∏Ç‡∏≤</th>
          <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
        </tr>
      </thead>
      <tbody id="studentTableBody"></tbody>
    </table>
  </div>

  <!-- Welcome Popup -->
  <div class="modal fade modern-modal" id="welcomeModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">

        <div class="modal-header border-0">
          <h4 class="modal-title text-success w-100 text-center">
            ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö! üéâ
          </h4>
        </div>

        <div class="modal-body text-center">
          <p style="font-size: 17px;">
            ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤  
            <br>‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß üòä
          </p>
        </div>

        <div class="modal-footer border-0 d-flex justify-content-center">
          <button id="closeWelcome" type="button" class="btn btn-green">
            ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
          </button>
        </div>

      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    let editIndex = -1;
    const tableBody = document.getElementById("studentTableBody");

    function loadData() {
      const data = localStorage.getItem("students_v2");
      return data ? JSON.parse(data) : [];
    }

    function saveData(data) {
      localStorage.setItem("students_v2", JSON.stringify(data));
    }

    function renderTable() {
      const data = loadData();
      tableBody.innerHTML = "";

      data.forEach((std, index) => {
        const tr = document.createElement("tr");

        tr.innerHTML = `
          <td>${std.id}</td>
          <td>${std.title_name}</td>
          <td>${std.first_name}</td>
          <td>${std.last_name}</td>
          <td>${std.email}</td>
          <td>${std.year}</td>
          <td>${std.major}</td>
          <td>
            <button class="btn btn-yellow btn-sm" onclick="editStudent(${index})">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
            <button class="btn btn-red btn-sm" onclick="deleteStudent(${index})">‡∏•‡∏ö</button>
          </td>
        `;

        tableBody.appendChild(tr);
      });
    }

    function editStudent(index) {
      const data = loadData();
      const std = data[index];

      editIndex = index;

      document.getElementById("id").value = std.id;
      document.getElementById("title_name").value = std.title_name;
      document.getElementById("first_name").value = std.first_name;
      document.getElementById("last_name").value = std.last_name;
      document.getElementById("email").value = std.email;
      document.getElementById("year").value = std.year;
      document.getElementById("major").value = std.major;

      document.getElementById("addBtn").innerText = "‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•";
    }

    function deleteStudent(index) {
      const data = loadData();
      data.splice(index, 1);
      saveData(data);
      renderTable();
    }

    document.getElementById("addBtn").addEventListener("click", () => {
      const std = {
        id: document.getElementById("id").value,
        title_name: document.getElementById("title_name").value,
        first_name: document.getElementById("first_name").value,
        last_name: document.getElementById("last_name").value,
        email: document.getElementById("email").value,
        year: document.getElementById("year").value,
        major: document.getElementById("major").value,
      };

      let data = loadData();

      if (editIndex === -1) {
        data.push(std);
      } else {
        data[editIndex] = std;
        editIndex = -1;
        document.getElementById("addBtn").innerText = "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•";
      }

      saveData(data);
      renderTable();
    });

    document.getElementById("clearAllBtn").onclick = () => {
      if (confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")) {
        localStorage.removeItem("students_v2");
        renderTable();
      }
    };

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏ö‡∏ö 3 ‡∏ä‡πà‡∏≠‡∏á
    function searchAndFire(inputId) {
      const key = document.getElementById(inputId).value.toLowerCase();
      const rows = tableBody.getElementsByTagName("tr");

      [...rows].forEach(r => {
        r.classList.remove("fire-effect");

        if (r.innerText.toLowerCase().includes(key) && key !== "") {
          r.classList.add("fire-effect");
        }
      });
    }

    document.getElementById("searchNameBtn").onclick = () => searchAndFire("searchName");
    document.getElementById("searchMajorBtn").onclick = () => searchAndFire("searchMajor");
    document.getElementById("searchEmailBtn").onclick = () => searchAndFire("searchEmail");

    const welcomeModalEl = document.getElementById("welcomeModal");
    const welcomeModal = new bootstrap.Modal(welcomeModalEl);

    window.onload = () => {
      renderTable();
      welcomeModal.show();
    };

    document.getElementById("closeWelcome").onclick = () => {
      const modalContent = welcomeModalEl.querySelector(".modal-content");
      modalContent.classList.add("closing");

      setTimeout(() => {
        welcomeModal.hide();
        modalContent.classList.remove("closing");
      }, 400);
    };
  </script>

</body>
</html>
